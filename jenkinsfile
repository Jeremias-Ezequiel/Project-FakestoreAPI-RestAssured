pipeline{
    agent any 

    stages{
        stage('Build'){
            steps{
                sh './mvnw clean compile'
            }
        }
        stage('Postman Smoke Test'){
            steps{
                sh './mvnw smokePostman.sh'
            }
        }
        stage('Test'){
            steps{
                bat './smokeTest.sh'
            }
        }
        stage('Generate Allure Report'){
            steps{
                allure includeProperties: false, jdk: '', results: [[path: 'target/allure-results']] 
            }
        }
    }
    post{
        always{
            always{
                cleanWs()       
            }
        }
    }
}